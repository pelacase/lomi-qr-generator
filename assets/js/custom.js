
function get_selected_colour() {
    let colorInput = document.getElementById('color-picker')
    return colorInput.value
}

async function make_qr_code(data) {
    const qrCode = new QRCodeStyling ({
        type: "svg",
        data: data,
        image: "data:image/png;base64,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\n",
        dotsOptions: {
            color: get_selected_colour(),
            type: "rounded"
        },
        imageOptions: {
            margin: 5
        },
        cornersSquareOptions: {
            type: "extra-rounded"
        },
        cornersDotOptions: {
            type: "dot"
        },
        qrOptions: {
            errorCorrectionLevel: "H"
        }
    });
    let blob_data = await qrCode.getRawData('svg')
    let url = URL.createObjectURL(blob_data);
    return url
}


async function make_qr_code_container(url) {
    let img = document.createElement('img');
    img.className = 'qr-code';
    let wrapper = document.createElement('div');
    wrapper.className = 'qr-code-wrapper';
    let title = document.createElement('span');
    title.innerText = url.replace(/[^a-z0-9]/gi, '_').toLowerCase();
    img.alt = title.innerText
    wrapper.appendChild(title);
    wrapper.appendChild(img);
    img.src = await make_qr_code(url)
    let images_container = document.getElementById('right-section');
    images_container.appendChild(wrapper);
}
async function update_qr_images() {
    let images_container = document.getElementById('right-section');
    images_container.innerHTML = '';
    let textArea = document.getElementById('text-box');
    let qr_strings = textArea.value.split('\n');
    for (let i = 0; i < qr_strings.length; i++) {
        if (qr_strings[i].trim() !== '') {
            await make_qr_code_container(qr_strings[i])
        }
    }
}
async function downloadSVGsAsZip(uris, image_names, zipFileName) {

    const zip = new JSZip();

    for (let i = 0; i < uris.length; i++) {
        const response = await fetch(uris[i]);
        let svg_string = await response.text()
        //Modfy SVG to remove background object
        const parser = new DOMParser();
        const svgDoc = parser.parseFromString(svg_string, "image/svg+xml");
        const rectElem = svgDoc.querySelector("svg > rect");
        rectElem.remove();
        let svg_image = svgDoc.querySelector("svg")
        svg_image.setAttribute("height", "0.75in")
        svg_image.setAttribute("width", "0.75in")
        svg_image.setAttribute("viewBox", "0 0 300 300")

        const serializer = new XMLSerializer();
        const modifiedSvg = serializer.serializeToString(svgDoc);
        zip.file(`${image_names[i]}.svg`, modifiedSvg);
    }

    // Generate the ZIP file and create a download link
    const zipBlob = await zip.generateAsync({ type: "blob" });
    const downloadLink = document.createElement("a");
    downloadLink.href = URL.createObjectURL(zipBlob);
    downloadLink.download = zipFileName;

    // Click the download link to trigger the download
    downloadLink.click();
}
async function initiate_download() {
    const qrCodeImages = document.querySelectorAll('img.qr-code');
    const imageSources = [];
    const imageNames = [];
    qrCodeImages.forEach(image => {
        imageSources.push(image.src);
        imageNames.push(image.alt)
    });
    const zipFileName = "images.zip";
    await downloadSVGsAsZip(imageSources, imageNames, zipFileName);
}
function register_listeners() {
    const downloadButton = document.getElementById("download-button");
    downloadButton.addEventListener("click", initiate_download)
    let textArea = document.getElementById('text-box');
    textArea.addEventListener('input', update_qr_images);
    let form = document.getElementById('image_type')
    form.addEventListener('change', update_qr_images)

}

register_listeners()